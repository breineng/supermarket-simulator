# Настройка системы множественных точек спавна клиентов

## Обзор

Система `CustomerSpawnerService` теперь поддерживает множественные точки спавна с рандомным выбором. Клиенты будут появляться в случайных точках, что создает более реалистичное поведение.

## Настройка

### Шаг 1: Создание точек спавна в сцене

1. **Создайте несколько GameObjects для точек спавна:**
   - Создайте пустые GameObjects в сцене
   - Расположите их в разных местах (например, возле входов, парковок, остановок)
   - Назовите их осмысленно: "SpawnPoint_MainEntrance", "SpawnPoint_Parking", "SpawnPoint_BusStop", etc.

2. **Настройте позиции точек спавна:**
   - Убедитесь, что точки спавна находятся на NavMesh
   - Проверьте, что от каждой точки есть путь к магазину
   - Рекомендуемое расстояние между точками: 10-50 метров

### Шаг 2: Настройка CustomerSpawnerService

1. **Найдите GameObject с CustomerSpawnerService в сцене**

2. **В инспекторе CustomerSpawnerService:**
   - Перетащите все созданные точки спавна в массив **Spawn Points**
   - Убедитесь, что поле **Customer Prefab** заполнено
   - Настройте **Spawn Interval** (рекомендуется 3-8 секунд)
   - Установите **Max Customers** (рекомендуется 8-15)

### Шаг 3: Программное управление точками спавна (опционально)

Если нужно динамически управлять точками спавна через код:

```csharp
// Получение сервиса
ICustomerSpawnerService spawnerService = Context.Resolve<ICustomerSpawnerService>();

// Добавление новой точки спавна
Transform newSpawnPoint = /* ... */;
spawnerService.AddSpawnPoint(newSpawnPoint);

// Удаление точки спавна
spawnerService.RemoveSpawnPoint(oldSpawnPoint);

// Замена всех точек спавна
Transform[] newSpawnPoints = { point1, point2, point3 };
spawnerService.SetSpawnPoints(newSpawnPoints);

// Получение количества активных точек спавна
int spawnPointCount = spawnerService.GetSpawnPointCount();
```

## Рекомендации по расположению точек спавна

### Для реалистичности:
- **Главный вход** - основная точка спавна рядом с входом в магазин
- **Парковка** - несколько точек на автостоянке
- **Остановка транспорта** - точка возле остановки автобуса/метро
- **Боковые входы** - дополнительные входы, если есть
- **Жилые зоны** - точки со стороны жилых домов

### Для баланса геймплея:
- Размещайте точки так, чтобы клиенты приходили с разных сторон
- Избегайте слишком близкого расположения к waypoints уличного движения
- Учитывайте время пути от спавна до магазина

## Интеграция с Street Walking System

Система множественных точек спавна отлично работает с Street Walking System:

1. **Клиенты спавнятся** в случайных точках
2. **Начинают ходить** по уличным waypoints
3. **Случайно решают** войти в магазин
4. **Возвращаются** к ближайшей точке выхода

## Отладка

### Логи в консоли:
- `CustomerSpawnerService: Started spawning customers with X spawn points`
- `CustomerSpawnerService: Spawned customer at spawn point 'PointName' (position)`

### Проверка в редакторе:
- Убедитесь, что все точки спавна назначены в массиве
- Проверьте, что точки не содержат null-ссылки
- Убедитесь, что все точки имеют корректные Transform компоненты

## Возможные проблемы

### "CustomerSpawnerService: Spawn points not set!"
**Решение:** Убедитесь, что массив Spawn Points заполнен в инспекторе

### "CustomerSpawnerService: Selected spawn point is null!"
**Решение:** Проверьте, что все элементы в массиве Spawn Points не равны null

### Клиенты спавнятся в воздухе или под землей
**Решение:** Проверьте Y-координаты точек спавна и убедитесь, что они на уровне земли

### Клиенты не могут дойти до магазина
**Решение:** Убедитесь, что все точки спавна находятся на NavMesh и имеют путь к магазину 